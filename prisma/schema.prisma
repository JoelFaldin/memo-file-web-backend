generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model memos {
  id               String    @id @db.VarChar(255) @unique
  direccion        String    @db.VarChar(255)
  tipo             String    @db.VarChar(255)
  patente          String    @db.VarChar(255)
  periodo          String    @db.VarChar(255)
  capital          Decimal   @db.Decimal
  afecto           Float
  total            Decimal   @db.Decimal
  emision          Int
  giro             String    @db.VarChar(255)
  agtp             String?   @db.VarChar(255)

  rut_local        String    @db.VarChar(255)
  nombre_local     String    @db.VarChar(255)
  local            locales   @relation("MemoToLocales", fields: [rut_local, nombre_local], references: [rut_local, nombre_local])

  pay_times        pay_times @relation(fields: [id], references: [memo_id])
}

model pay_times {
  memo_id String @id @db.VarChar(255)
  day     Int
  month   Int
  year    Int
  memos   memos[]
}

model locales {
  rut_local        String          @db.VarChar(255)
  nombre_local     String          @db.VarChar(255)
  id_representante String?         @unique @db.VarChar(255)

  representantes   representantes? @relation(fields: [id_representante], references: [representante_id], onDelete: NoAction, onUpdate: NoAction)

  memos            memos[]         @relation("MemoToLocales")

  @@id([rut_local, nombre_local])
}

model representantes {
  representante_id     String    @id @unique @db.VarChar(255)
  rut_representante    String?   @db.VarChar(255)
  nombre_representante String?   @db.VarChar(255)
  locales              locales?
}
